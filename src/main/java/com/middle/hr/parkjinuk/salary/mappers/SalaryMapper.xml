<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="SalaryRepository">

	<!-- 기본급 항목 전체 조회 -->
	<select id="selectBaseSalaryByLoginId" parameterType="String"
		resultType="Salary">
		SELECT bs.id id, bs.name name, bs.amount amount,
		bs.company_id company_id
		FROM basic_salary bs
		JOIN staff s ON
		bs.company_id = s.company_id
		WHERE s.login_id = #{loginId}
	</select>

	<!-- 해당하는 기본급 항목을 받고있는 사원들 조회 -->
	<select id="selectStaffInfoByBaseSalary" parameterType="Salary"
		resultType="Staff">
		SELECT d.name departmentName, s.name staffName, bs.name basicSalaryName,
		bs.amount amount
		FROM staff s INNER JOIN BASIC_SALARY bs ON s.SALARY_ID = bs.id
		INNER JOIN DEPARTMENT d ON d.ID = s.DEPARTMENT_ID
		WHERE bs.company_id=#{companyId} AND bs.id=#{id}
	</select>

</mapper>